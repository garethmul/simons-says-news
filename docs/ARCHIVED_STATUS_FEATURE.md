# Archived Status Feature

## Overview

The Archived Status feature extends the content lifecycle management system by adding a final "archived" status for content that has completed its lifecycle. This allows users to mark approved content as "used" and move it out of active content management while maintaining historical records.

## Content Lifecycle Workflow

The complete content workflow is now:

1. **`draft`** ‚Üí Content generated by AI, awaiting initial review
2. **`review_pending`** ‚Üí Content submitted for human review  
3. **`approved`** ‚Üí Content approved by humans, ready for publication
4. **`published`** ‚Üí Content marked as published to Eden.co.uk
5. **`archived`** ‚Üí Content that has been used and completed its lifecycle

## Key Features

### üóÉÔ∏è **Archive Management**
- Dedicated "Archived" tab for viewing archived content
- Archive button in approved content actions
- Return to approved status for content reuse
- Complete lifecycle tracking and audit trail

### üìä **Enhanced Analytics**
- Archived content statistics in dashboard
- Historical content performance tracking
- Usage pattern analysis
- Content lifecycle completion metrics

### üîÑ **Flexible Content Management**
- Archive approved content after use
- Return archived content to approved status if needed
- Maintain full content history and relationships
- Search and filter archived content

## Implementation Details

### **Database Changes**

**Modified Tables:**
- `ssnews_generated_articles`: Added `'archived'` to status ENUM
- `ssnews_generated_social_posts`: Added `'archived'` to status ENUM for consistency

**Migration Script:**
- `src/scripts/add-archived-status.js` - Safely adds archived status to existing ENUM columns
- Handles existing data and verifies changes
- Provides status distribution reports

### **Frontend Components**

**New Components:**
- `ArchivedContentTab.jsx` - Complete archived content management interface
- Filtering, searching, and pagination for archived content
- Help section with archived content guidance

**Enhanced Components:**
- `ContentCard.jsx` - Added archived actions and styling
- `ApprovedContentTab.jsx` - Archive button for approved content  
- `DetailModal.jsx` - Archived content review and actions
- `StatusBadge.jsx` - Archived status display

### **State Management**

**useProjectEdenData Hook Updates:**
- Added `archivedContent` state management
- Enhanced data fetching to include archived content
- Updated statistics calculation
- Account-scoped archived content handling

**ProjectEdenRefactored.jsx Updates:**
- New archived tab with proper routing
- Archive action integration
- Modal action handling for archived content

### **API Integration**

**Existing Endpoints Enhanced:**
- `GET /api/eden/content/review?status=archived` - Fetch archived content
- `PUT /api/eden/content/article/{id}/status` - Archive/unarchive actions
- Account-aware archived content filtering

**Content Actions:**
- Archive approved content: `updateContentStatus('article', contentId, 'archived')`
- Return to approved: `updateContentStatus('article', contentId, 'approved')`
- Full audit trail maintained

## User Interface

### **Archived Content Tab**
- **Location**: Main navigation between "Approved" and "Rejected"
- **Features**: 
  - Search archived content by title, source, type
  - Filter by content type and source
  - Sort by archived date, creation date, title, etc.
  - Pagination for large archived collections

### **Archive Actions**
- **In Approved Content**: "Archive" button to move content to archived status
- **In Archived Content**: "Return to Approved" button to restore content
- **Detail Modal**: Archive/unarchive actions with full content review

### **Visual Design**
- **Archived Content Cards**: Gray left border and "Archived" badge
- **Status Badge**: Outline variant for archived status
- **Tab Counter**: Shows archived content count `Archived (X)`
- **Help Section**: Gray theme with archive guidance

## User Benefits

### üìà **Improved Content Management**
- Clear separation between active and completed content
- Reduced clutter in approved content tab
- Historical content tracking and analysis
- Better workflow organisation

### üîç **Enhanced Visibility**
- Complete content lifecycle tracking
- Usage pattern insights
- Performance history analysis
- Content reuse opportunities

### üíº **Professional Workflow**
- Industry-standard content lifecycle management
- Audit trail for compliance and reporting
- Team collaboration improvements
- Content strategy optimization

## Usage Examples

### **Archive Approved Content**
1. Navigate to "Approved" tab
2. Find content that has been used/published
3. Click "Archive" button on content card
4. Content moves to "Archived" tab
5. Approved tab shows only active content

### **Restore Archived Content**
1. Navigate to "Archived" tab
2. Find content to restore
3. Click "Return to Approved" button
4. Content moves back to "Approved" tab
5. Available for reuse or republishing

### **Review Archived Content**
1. Browse archived content with search/filter
2. Click "View Details" to review full content
3. Check historical performance and usage
4. Restore or regenerate if needed

## Technical Implementation

### **Constants Updated**
```javascript
// New TAB_ROUTES entry
ARCHIVED: 'archived'

// New STATUS_VARIANTS entry  
archived: 'outline'

// New GENERATED_CONTENT_STATUS entry
ARCHIVED: 'archived'
```

### **Component Props**
```javascript
// ContentCard.jsx
showArchivedActions={true}
onReturnToApproved={handleReturnToApproved}

// ArchivedContentTab.jsx  
archivedContent={archivedContent}
onReturnToApproved={updateContentStatus}

// DetailModal.jsx
showArchivedActions={true}
onReturnToApproved={updateContentStatus}
```

### **State Management**
```javascript
// useProjectEdenData.js
const [archivedContent, setArchivedContent] = useState([]);

// Data fetching
fetchWithAccountContext(`${API_ENDPOINTS.CONTENT_REVIEW}?status=archived`)

// Stats calculation  
archivedContent: archivedData.content?.length || 0
```

## Security & Permissions

- **Account-Scoped Access**: All archived content operations respect account boundaries
- **User Authentication**: Archive actions require proper user authentication
- **Permission Validation**: Content archive/restore validates user permissions
- **Audit Logging**: All archive operations logged for security and compliance

## Performance Considerations

- **Efficient Pagination**: Large archived collections handled with proper pagination
- **Optimized Queries**: Database queries optimized for archived content filtering
- **Lazy Loading**: Archived content loaded only when tab is accessed
- **Caching Strategy**: Archived content statistics cached for dashboard performance

## Future Enhancements

### **Potential Extensions**
- **Bulk Archive Operations**: Select multiple content pieces for batch archiving
- **Archive Scheduling**: Automatically archive content after specified time periods  
- **Archive Analytics**: Detailed reports on content lifecycle and usage patterns
- **Export Functionality**: Export archived content for external analysis
- **Archive Categories**: Organize archived content into categories or tags

### **Integration Opportunities**
- **Publishing Platform Integration**: Sync archive status with actual publication status
- **Analytics Integration**: Connect archived content with website performance metrics
- **Content Calendar**: Integrate archived content with editorial calendars
- **Team Collaboration**: Archive notifications and team workflows

## Conclusion

The Archived Status feature provides a complete content lifecycle management solution, enabling professional content workflow management with proper historical tracking. It enhances productivity by reducing clutter while maintaining full audit trails and content reuse capabilities.

The implementation follows existing patterns and maintains backward compatibility while providing a foundation for future content management enhancements. 