# üöÄ IMPROVED PROJECT SETUP RULES

## ‚ö†Ô∏è CRITICAL REQUIREMENTS - MANDATORY COMPLETION

**These steps are REQUIRED and MUST be completed for every new project:**

### üî¥ MANDATORY: GitHub Repository Setup
- **MUST** initialize git repository: `git init`
- **MUST** create GitHub repository (public)
- **MUST** add all files and make initial commit
- **MUST** push to GitHub with main branch
- **VERIFICATION**: `git remote -v` must show GitHub origin

### üî¥ MANDATORY: Heroku Application Setup  
- **MUST** create Heroku app: `heroku create PROJECT_NAME`
- **MUST** configure environment variables for production
- **MUST** set up automatic deployment from GitHub
- **VERIFICATION**: `heroku apps:info` must show app details

### üî¥ MANDATORY: Deployment Pipeline
- **MUST** connect GitHub repository to Heroku
- **MUST** enable automatic deploys from main branch
- **MUST** verify first deployment succeeds
- **VERIFICATION**: App must be accessible at Heroku URL

**‚ùå PROJECT IS INCOMPLETE WITHOUT ALL THREE REQUIREMENTS**

---

# Improved Development Environment Setup Guide

This guide documents the enhanced standard development environment setup for full-stack React/Node.js applications that can run locally and deploy to Heroku.

## ‚ö†Ô∏è Critical Setup Requirements

### File Location Requirements (MANDATORY)
- `index.html` MUST be in project root (NOT in public/) for Vite
- `package.json` MUST be in project root
- `.env` MUST be in project root
- Static assets (vite.svg, images) go in `public/` folder
- All source code goes in `src/` folder

### Validation Requirements
Every major step MUST include verification commands. If any verification fails, troubleshoot before proceeding.

## Project Structure Overview

```
project-root/
‚îú‚îÄ‚îÄ index.html             ‚Üê CRITICAL: Must be here for Vite
‚îú‚îÄ‚îÄ package.json           ‚Üê Dependencies and scripts
‚îú‚îÄ‚îÄ .env                   ‚Üê Environment variables
‚îú‚îÄ‚îÄ ports.config.js        ‚Üê Port configuration
‚îú‚îÄ‚îÄ server.js              ‚Üê Express server entry point
‚îú‚îÄ‚îÄ start-dev.js           ‚Üê Development startup script
‚îú‚îÄ‚îÄ vite.config.js         ‚Üê Vite configuration
‚îú‚îÄ‚îÄ tailwind.config.js     ‚Üê Tailwind CSS config
‚îú‚îÄ‚îÄ postcss.config.js      ‚Üê PostCSS configuration
‚îú‚îÄ‚îÄ .gitignore             ‚Üê Git ignore rules
‚îú‚îÄ‚îÄ Procfile               ‚Üê Heroku deployment config
‚îú‚îÄ‚îÄ nodemon.json           ‚Üê Auto-generated by start-dev.js
‚îú‚îÄ‚îÄ src/                   ‚Üê Source code
‚îÇ   ‚îú‚îÄ‚îÄ components/        ‚Üê React components
‚îÇ   ‚îú‚îÄ‚îÄ pages/             ‚Üê React pages
‚îÇ   ‚îú‚îÄ‚îÄ routes/            ‚Üê Express API routes
‚îÇ   ‚îú‚îÄ‚îÄ config/            ‚Üê Configuration files
‚îÇ   ‚îú‚îÄ‚îÄ utils/             ‚Üê Utility functions
‚îÇ   ‚îú‚îÄ‚îÄ services/          ‚Üê Business logic services
‚îÇ   ‚îú‚îÄ‚îÄ middleware/        ‚Üê Express middleware
‚îÇ   ‚îú‚îÄ‚îÄ models/            ‚Üê Data models
‚îÇ   ‚îú‚îÄ‚îÄ hooks/             ‚Üê React hooks
‚îÇ   ‚îú‚îÄ‚îÄ assets/            ‚Üê Static assets
‚îÇ   ‚îú‚îÄ‚îÄ styles/            ‚Üê CSS/styling files
‚îÇ   ‚îú‚îÄ‚îÄ scripts/           ‚Üê Database migrations & scripts
‚îÇ   ‚îú‚îÄ‚îÄ socket/            ‚Üê WebSocket configuration
‚îÇ   ‚îú‚îÄ‚îÄ main.jsx           ‚Üê React entry point
‚îÇ   ‚îú‚îÄ‚îÄ App.jsx            ‚Üê Main React component
‚îÇ   ‚îî‚îÄ‚îÄ index.css          ‚Üê Main CSS file
‚îú‚îÄ‚îÄ public/                ‚Üê Static files served by Vite
‚îÇ   ‚îî‚îÄ‚îÄ vite.svg           ‚Üê Favicon and static assets
‚îú‚îÄ‚îÄ scripts/               ‚Üê Development utilities
‚îÇ   ‚îú‚îÄ‚îÄ kill-ports.js      ‚Üê Port cleanup script
‚îÇ   ‚îú‚îÄ‚îÄ health-check.js    ‚Üê Health monitoring
‚îÇ   ‚îú‚îÄ‚îÄ setup-github.js    ‚Üê GitHub setup automation
‚îÇ   ‚îú‚îÄ‚îÄ setup-heroku.js    ‚Üê Heroku setup automation
‚îÇ   ‚îî‚îÄ‚îÄ enhanced-cleanup.js ‚Üê Advanced cleanup
‚îú‚îÄ‚îÄ dist/                  ‚Üê Production build output
‚îî‚îÄ‚îÄ README.md              ‚Üê Project documentation
```

## Port Configuration Strategy

### Dynamic Port Allocation (MANDATORY)
**CRITICAL**: Each new project MUST use unique, random ports to avoid conflicts.

#### Port Selection Process
1. Generate random ports using: 
   ```bash
   node -e "const f = Math.floor(Math.random() * 1000) + 5000; const b = Math.floor(Math.random() * 1000) + 3000; console.log('Frontend:', f, 'Backend:', b, 'HMR:', f + 1);"
   ```
2. **VERIFY**: Check ports aren't in use: `lsof -i :PORT_NUMBER` (Unix) or `netstat -ano | findstr :PORT_NUMBER` (Windows)
3. Avoid common ports: 3000, 3001, 5000, 5173, 8000, 8080, 9000
4. Document chosen ports in project README

#### Port Configuration File
Create `ports.config.js` with your generated ports:
```javascript
// Auto-generated port configuration
export const PORTS = {
  FRONTEND: 5576,  // Your random port in 5000-5999 range
  BACKEND: 3607,   // Your random port in 3000-3999 range
  HMR: 5577        // Frontend port + 1
};

export const getPortConfig = () => ({
  vite: PORTS.FRONTEND,
  express: PORTS.BACKEND,
  hmr: PORTS.HMR
});
```

## Step-by-Step Setup Process

### Step 1: Generate Ports and Create Configuration

1. **Generate random ports**:
   ```bash
   node -e "const f = Math.floor(Math.random() * 1000) + 5000; const b = Math.floor(Math.random() * 1000) + 3000; console.log('Frontend:', f, 'Backend:', b, 'HMR:', f + 1);"
   ```

2. **Create ports.config.js** with your generated ports

3. **VERIFY**: File exists and exports PORTS object
   ```bash
   node -e "import('./ports.config.js').then(p => console.log('‚úÖ Ports:', p.PORTS))"
   ```

### Step 2: Create Package.json with Verified Dependencies

Create `package.json` with these TESTED versions:

```json
{
  "name": "your-project-name",
  "version": "1.0.0",
  "description": "A full-stack React/Node.js application",
  "main": "server.js",
  "type": "module",
  "engines": {
    "node": ">=18.0.0"
  },
  "scripts": {
    "start": "node server.js",
    "server": "nodemon --config nodemon.json server.js",
    "client": "vite --port YOUR_FRONTEND_PORT",
    "dev": "node start-dev.js",
    "restart": "node scripts/kill-ports.js && npm run dev",
    "build": "vite build",
    "heroku-postbuild": "npm run build",
    "kill-ports": "node scripts/kill-ports.js",
    "dev:legacy": "concurrently \"npm run server\" \"npm run client\"",
    "preview": "vite preview",
    "lint": "eslint src --ext js,jsx --report-unused-disable-directives --max-warnings 0",
    "setup:github": "node scripts/setup-github.js",
    "setup:heroku": "node scripts/setup-heroku.js",
    "setup:heroku-env": "node scripts/setup-heroku-env.js",
    "setup:auto-deploy": "node scripts/setup-auto-deploy.js",
    "setup:complete": "node scripts/complete-setup.js",
    "deploy": "git push heroku main",
    "clean": "node scripts/enhanced-cleanup.js",
    "fresh-start": "npm run clean && npm install && npm run dev",
    "health-check": "node scripts/health-check.js"
  },
  "dependencies": {
    "express": "^4.21.2",
    "cors": "^2.8.5",
    "dotenv": "^16.4.7",
    "express-session": "^1.18.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^7.1.1"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^4.2.1",
    "vite": "^5.0.8",
    "nodemon": "^3.1.9",
    "concurrently": "^8.2.2",
    "tailwindcss": "^3.4.1",
    "autoprefixer": "^10.4.17",
    "postcss": "^8.4.33",
    "eslint": "^8.55.0",
    "eslint-plugin-react": "^7.33.2",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.4.5",
    "node-fetch": "^3.3.2"
  },
  "keywords": [
    "react",
    "nodejs",
    "express",
    "vite",
    "full-stack"
  ],
  "author": "",
  "license": "MIT"
}
```

**CRITICAL**: Update `YOUR_FRONTEND_PORT` with your actual frontend port.

4. **VERIFY**: Install dependencies
   ```bash
   npm install
   ```
   **MUST complete without errors**. If it fails:
   - Check for typos in package names
   - Run `npm cache clean --force`
   - Retry installation

5. **VERIFY**: Check node_modules exists
   ```bash
   ls -la node_modules/ | head -5
   ```

### Step 3: Create Directory Structure

```bash
mkdir -p src/{components,pages,routes,config,utils,services,middleware,models,hooks,assets,styles,scripts,socket} public scripts dist
```

**VERIFY**: Directory structure exists
```bash
ls -la src/
ls -la public/
ls -la scripts/
```

### Step 4: Create Core Configuration Files

#### Vite Configuration
Create `vite.config.js`:
```javascript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import { PORTS } from './ports.config.js'

export default defineConfig({
  plugins: [react()],
  server: {
    port: PORTS.FRONTEND,
    strictPort: true,
    host: 'localhost',
    hmr: {
      port: PORTS.HMR
    },
    proxy: {
      '/api': {
        target: `http://localhost:${PORTS.BACKEND}`,
        changeOrigin: true,
        secure: false,
        ws: true,
        timeout: 30000
      }
    }
  },
  build: {
    outDir: 'dist',
    sourcemap: false,
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          router: ['react-router-dom']
        }
      }
    }
  },
  preview: {
    port: PORTS.FRONTEND,
    strictPort: true
  }
})
```

#### Express Server
Create `server.js`:
```javascript
import express from 'express';
import cors from 'cors';
import session from 'express-session';
import dotenv from 'dotenv';
import path from 'path';
import { fileURLToPath } from 'url';
import { PORTS } from './ports.config.js';

dotenv.config();

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const app = express();
const PORT = process.env.PORT || PORTS.BACKEND;

// CORS configuration
const corsOptions = {
  origin: process.env.NODE_ENV === 'production' 
    ? [process.env.FRONTEND_URL || 'https://your-app-name.herokuapp.com']
    : [`http://localhost:${PORTS.FRONTEND}`, `http://127.0.0.1:${PORTS.FRONTEND}`],
  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],
  credentials: true,
  optionsSuccessStatus: 200
};

app.use(cors(corsOptions));
app.use(express.json({ limit: '10mb' }));
app.use(express.urlencoded({ extended: true, limit: '10mb' }));

// Session configuration
app.use(session({
  secret: process.env.SESSION_SECRET || 'dev-session-secret-change-in-production',
  resave: false,
  saveUninitialized: false,
  cookie: {
    secure: process.env.NODE_ENV === 'production',
    httpOnly: true,
    maxAge: 24 * 60 * 60 * 1000
  }
}));

// Health check endpoint
app.get('/api/health', (req, res) => {
  res.json({ 
    status: 'OK', 
    timestamp: new Date().toISOString(),
    environment: process.env.NODE_ENV || 'development',
    port: PORT
  });
});

// Serve static files in production
if (process.env.NODE_ENV === 'production') {
  app.use(express.static(path.join(__dirname, 'dist')));
  
  app.get('*', (req, res) => {
    if (!req.path.startsWith('/api')) {
      res.sendFile(path.join(__dirname, 'dist', 'index.html'));
    } else {
      res.status(404).json({ error: 'API endpoint not found' });
    }
  });
} else {
  app.use(express.static(path.join(__dirname, 'public')));
  
  app.get('/', (req, res) => {
    res.json({ 
      message: 'Development server running',
      frontend: `http://localhost:${PORTS.FRONTEND}`,
      api: `http://localhost:${PORT}/api`
    });
  });
}

// Error handling
app.use((err, req, res, next) => {
  console.error('Error:', err.stack);
  res.status(500).json({ 
    error: process.env.NODE_ENV === 'production' 
      ? 'Internal server error' 
      : err.message 
  });
});

app.use('/api/*', (req, res) => {
  res.status(404).json({ error: 'API endpoint not found' });
});

app.listen(PORT, () => {
  console.log(`üöÄ Server running on port ${PORT}`);
  console.log(`üì± Environment: ${process.env.NODE_ENV || 'development'}`);
  if (process.env.NODE_ENV !== 'production') {
    console.log(`üåê Frontend: http://localhost:${PORTS.FRONTEND}`);
    console.log(`üîó API: http://localhost:${PORT}/api`);
  }
});

process.on('SIGTERM', () => {
  console.log('SIGTERM received, shutting down gracefully');
  process.exit(0);
});

process.on('SIGINT', () => {
  console.log('SIGINT received, shutting down gracefully');
  process.exit(0);
});
```

### Step 5: Create HTML Template (CRITICAL LOCATION)

**CRITICAL**: Create `index.html` in PROJECT ROOT (not in public/):

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Your project description" />
    <title>Your Project Name</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
```

**VERIFY**: File is in correct location
```bash
ls -la index.html
# Should show index.html in current directory (project root)
```

### Step 6: Create React Application Files

#### Main Entry Point
Create `src/main.jsx`:
```javascript
import React from 'react'
import ReactDOM from 'react-dom/client'
import { BrowserRouter } from 'react-router-dom'
import App from './App.jsx'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </React.StrictMode>,
)
```

#### Main App Component
Create `src/App.jsx`:
```javascript
import { Routes, Route } from 'react-router-dom'
import { useState, useEffect } from 'react'
import Home from './pages/Home'
import About from './pages/About'
import Navigation from './components/Navigation'

function App() {
  const [apiStatus, setApiStatus] = useState('checking')

  useEffect(() => {
    fetch('/api/health')
      .then(res => res.json())
      .then(data => {
        console.log('API Health:', data)
        setApiStatus('connected')
      })
      .catch(err => {
        console.error('API connection failed:', err)
        setApiStatus('disconnected')
      })
  }, [])

  return (
    <div className="min-h-screen bg-gray-50">
      <Navigation />
      
      <main className="container mx-auto px-4 py-8">
        <div className="mb-4">
          <div className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${
            apiStatus === 'connected' 
              ? 'bg-green-100 text-green-800' 
              : apiStatus === 'disconnected'
              ? 'bg-red-100 text-red-800'
              : 'bg-yellow-100 text-yellow-800'
          }`}>
            <div className={`w-2 h-2 rounded-full mr-2 ${
              apiStatus === 'connected' 
                ? 'bg-green-400' 
                : apiStatus === 'disconnected'
                ? 'bg-red-400'
                : 'bg-yellow-400'
            }`}></div>
            API {apiStatus === 'checking' ? 'Checking...' : apiStatus === 'connected' ? 'Connected' : 'Disconnected'}
          </div>
        </div>

        <Routes>
          <Route path="/" element={<Home />} />
          <Route path="/about" element={<About />} />
        </Routes>
      </main>
    </div>
  )
}

export default App
```

#### CSS Configuration
Create `src/index.css`:
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;
  color-scheme: light dark;
  color: rgba(255, 255, 255, 0.87);
  background-color: #242424;
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-text-size-adjust: 100%;
}

body {
  margin: 0;
  display: flex;
  place-items: center;
  min-width: 320px;
  min-height: 100vh;
}

#root {
  width: 100%;
  margin: 0;
}

@media (prefers-color-scheme: light) {
  :root {
    color: #213547;
    background-color: #ffffff;
  }
}
```

### Step 7: Create Development Startup Script

Create `start-dev.js`:
```javascript
import { spawn, exec } from 'child_process';
import { platform } from 'os';
import { promisify } from 'util';
import fs from 'fs';
import { PORTS } from './ports.config.js';

const execAsync = promisify(exec);
const isWindows = platform() === 'win32';
const PORTS_TO_KILL = [PORTS.FRONTEND, PORTS.BACKEND, PORTS.HMR];

async function killProcessOnPort(port) {
  try {
    if (isWindows) {
      const findCmd = `netstat -ano | findstr :${port}`;
      const { stdout } = await execAsync(findCmd);
      
      if (stdout) {
        const lines = stdout.trim().split('\n');
        for (const line of lines) {
          const parts = line.trim().split(/\s+/);
          if (parts.length > 4) {
            const pid = parts[4];
            if (pid && pid !== '0') {
              await execAsync(`taskkill /F /PID ${pid}`);
              console.log(`‚úÖ Killed process ${pid} on port ${port}`);
            }
          }
        }
      }
    } else {
      await execAsync(`lsof -ti:${port} | xargs kill -9`);
      console.log(`‚úÖ Killed process on port ${port}`);
    }
  } catch (error) {
    console.log(`‚ÑπÔ∏è  No process found on port ${port}`);
  }
}

async function createNodemonConfig() {
  const nodemonConfig = {
    restartable: "rs",
    ignore: [
      ".git",
      "node_modules/**/node_modules",
      "dist",
      "src/components/**/*",
      "src/pages/**/*",
      "src/assets/**/*",
      "src/hooks/**/*",
      "src/styles/**/*",
      "src/App.jsx",
      "src/main.jsx",
      "src/index.css",
      "*.test.js"
    ],
    verbose: true,
    watch: [
      "src/routes/",
      "src/config/",
      "src/utils/",
      "src/models/",
      "src/middleware/",
      "src/services/",
      "src/socket/",
      "server.js"
    ],
    ext: "js,jsx,json",
    delay: "1000",
    env: {
      NODE_ENV: "development"
    }
  };

  fs.writeFileSync('nodemon.json', JSON.stringify(nodemonConfig, null, 2));
  console.log('üìù Created nodemon.json configuration');
}

async function startDevelopment() {
  console.log('üöÄ Starting development environment...\n');

  console.log('üî™ Cleaning up existing processes...');
  await Promise.all(PORTS_TO_KILL.map(port => killProcessOnPort(port)));

  await createNodemonConfig();

  console.log('\nüîß Starting servers...');

  console.log(`üñ•Ô∏è  Starting backend server on port ${PORTS.BACKEND}...`);
  const backendProcess = spawn('npm', ['run', 'server'], {
    stdio: ['inherit', 'inherit', 'inherit'],
    shell: true
  });

  await new Promise(resolve => setTimeout(resolve, 3000));

  console.log(`üåê Starting frontend server on port ${PORTS.FRONTEND}...`);
  const frontendProcess = spawn('npm', ['run', 'client'], {
    stdio: ['inherit', 'inherit', 'inherit'],
    shell: true
  });

  const cleanup = () => {
    console.log('\nüõë Shutting down development servers...');
    
    if (backendProcess && !backendProcess.killed) {
      backendProcess.kill('SIGTERM');
    }
    
    if (frontendProcess && !frontendProcess.killed) {
      frontendProcess.kill('SIGTERM');
    }
    
    setTimeout(() => {
      if (backendProcess && !backendProcess.killed) {
        backendProcess.kill('SIGKILL');
      }
      if (frontendProcess && !frontendProcess.killed) {
        frontendProcess.kill('SIGKILL');
      }
      process.exit(0);
    }, 5000);
  };

  process.on('SIGINT', cleanup);
  process.on('SIGTERM', cleanup);
  process.on('exit', cleanup);

  backendProcess.on('error', (error) => {
    console.error('‚ùå Backend process error:', error);
  });

  frontendProcess.on('error', (error) => {
    console.error('‚ùå Frontend process error:', error);
  });

  console.log('\n‚úÖ Development environment started!');
  console.log(`üåê Frontend: http://localhost:${PORTS.FRONTEND}`);
  console.log(`üîó Backend: http://localhost:${PORTS.BACKEND}`);
  console.log(`üí° Press Ctrl+C to stop all servers\n`);
}

startDevelopment().catch(console.error);
```

### Step 8: Create Essential Configuration Files

#### Environment Variables
Create `.env`:
```env
# Server Configuration
NODE_ENV=development
PORT=YOUR_BACKEND_PORT
SESSION_SECRET=dev-session-secret-change-in-production

# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_USER=your-db-user
DB_PASSWORD=your-db-password
DB_NAME=your_project_name

# Frontend Configuration
VITE_API_URL=/api
FRONTEND_URL=http://localhost:YOUR_FRONTEND_PORT

# API Keys (prefix with VITE_ for client-side access)
# VITE_OPENAI_API_KEY=your-openai-key
# OPENAI_API_KEY=your-openai-key

# Debug Configuration
VITE_DEBUG_LEVEL=1
VITE_DEBUG_CATEGORIES=PROGRESS,DIALOG
```

**CRITICAL**: Replace `YOUR_BACKEND_PORT` and `YOUR_FRONTEND_PORT` with your actual ports.

#### Tailwind Configuration
Create `tailwind.config.js`:
```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
    "./public/**/*.html"
  ],
  theme: {
    extend: {
      fontFamily: {
        sans: ['Inter', 'system-ui', 'Avenir', 'Helvetica', 'Arial', 'sans-serif'],
      },
      colors: {
        primary: {
          50: '#eff6ff',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
        }
      }
    },
  },
  plugins: [],
}
```

#### PostCSS Configuration
Create `postcss.config.js`:
```javascript
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
```

#### Git Ignore
Create `.gitignore`:
```gitignore
# Dependencies
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Build outputs
/dist
/build
.vite/

# Environment files
.env
.env.*
*.env
!.env.example

# IDE files
.vscode/
.idea/
*.swp
*.swo

# OS files
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# Logs
*.log
logs/

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Coverage directory
coverage/
*.lcov

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Temporary folders
tmp/
temp/

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
```

#### Heroku Configuration
Create `Procfile`:
```
web: node server.js
```

### Step 9: Create Utility Scripts

#### Port Cleanup Script
Create `scripts/kill-ports.js`:
```javascript
import { exec } from 'child_process';
import { platform } from 'os';
import { promisify } from 'util';
import { PORTS } from '../ports.config.js';

const execAsync = promisify(exec);
const isWindows = platform() === 'win32';
const PORTS_TO_KILL = [PORTS.FRONTEND, PORTS.BACKEND, PORTS.HMR];

async function killProcessOnPort(port) {
  try {
    if (isWindows) {
      const findCmd = `netstat -ano | findstr :${port}`;
      const { stdout } = await execAsync(findCmd);
      
      if (stdout) {
        const lines = stdout.trim().split('\n');
        for (const line of lines) {
          const parts = line.trim().split(/\s+/);
          if (parts.length > 4) {
            const pid = parts[4];
            if (pid && pid !== '0') {
              await execAsync(`taskkill /F /PID ${pid}`);
              console.log(`‚úÖ Killed process ${pid} on port ${port}`);
            }
          }
        }
      }
    } else {
      await execAsync(`lsof -ti:${port} | xargs kill -9`);
      console.log(`‚úÖ Killed process on port ${port}`);
    }
  } catch (error) {
    console.log(`‚ÑπÔ∏è  No process found on port ${port}`);
  }
}

async function killPorts() {
  console.log('üî™ Killing processes on configured ports...');
  await Promise.all(PORTS_TO_KILL.map(port => killProcessOnPort(port)));
  console.log('‚úÖ Port cleanup complete');
}

killPorts().catch(console.error);
```

#### Health Check Script
Create `scripts/health-check.js`:
```javascript
import { PORTS } from '../ports.config.js';

async function checkHealth() {
  console.log('üè• Running health check...\n');
  
  try {
    const fetch = (await import('node-fetch')).default;
    
    console.log(`üîç Checking backend server (http://localhost:${PORTS.BACKEND})...`);
    const backendResponse = await fetch(`http://localhost:${PORTS.BACKEND}/api/health`, {
      timeout: 5000
    });
    
    if (backendResponse.ok) {
      const data = await backendResponse.json();
      console.log('‚úÖ Backend server is healthy');
      console.log(`   Status: ${data.status}`);
      console.log(`   Environment: ${data.environment}`);
      console.log(`   Port: ${data.port}`);
    } else {
      console.log(`‚ùå Backend server returned status: ${backendResponse.status}`);
    }
    
    console.log(`\nüîç Checking frontend server (http://localhost:${PORTS.FRONTEND})...`);
    const frontendResponse = await fetch(`http://localhost:${PORTS.FRONTEND}`, {
      timeout: 5000
    });
    
    if (frontendResponse.ok) {
      console.log('‚úÖ Frontend server is healthy');
      console.log(`   Status: ${frontendResponse.status}`);
      console.log(`   Content-Type: ${frontendResponse.headers.get('content-type')}`);
    } else {
      console.log(`‚ùå Frontend server returned status: ${frontendResponse.status}`);
    }
    
    console.log('\nüéâ Health check complete!');
    console.log(`üåê Frontend: http://localhost:${PORTS.FRONTEND}`);
    console.log(`üîó Backend API: http://localhost:${PORTS.BACKEND}/api`);
    
  } catch (error) {
    console.error('‚ùå Health check failed:', error.message);
    console.log('\nüí° Troubleshooting tips:');
    console.log('   ‚Ä¢ Make sure both servers are running: npm run dev');
    console.log('   ‚Ä¢ Check if ports are available');
    console.log('   ‚Ä¢ Verify environment variables in .env');
    console.log('   ‚Ä¢ Try restarting: npm run restart');
  }
}

checkHealth();
```

### Step 10: Create Static Assets

#### Vite Icon
Create `public/vite.svg`:
```svg
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>
```

## üì¶ Step 6: GitHub Repository Setup (MANDATORY)

### 6.1 Initialize Git Repository
```bash
# Initialize git if not already done
git init
git branch -M main
```

### 6.2 Create GitHub Repository
**Option A: Using GitHub CLI (Recommended)**
```bash
# Install GitHub CLI if not available: https://cli.github.com/
gh repo create PROJECT_NAME --public --source=. --remote=origin --push
```

**Option B: Manual Setup**
1. Go to https://github.com/new
2. Create repository named exactly: `PROJECT_NAME`
3. Make it public
4. Do NOT initialize with README (we have files already)
5. Copy the repository URL
6. Run these commands:
```bash
git remote add origin https://github.com/USERNAME/PROJECT_NAME.git
git add .
git commit -m "Initial commit: project setup"
git push -u origin main
```

### 6.3 Verification Commands
```bash
git remote -v                    # Should show GitHub origin
git status                       # Should show "up to date with origin/main"
```

**‚úÖ SUCCESS CRITERIA:**
- Repository visible on GitHub.com
- All project files pushed to main branch
- Git remote origin points to GitHub

---

## üöÄ Step 7: Heroku Application Setup (MANDATORY)

### 7.1 Create Heroku Application
```bash
# Install Heroku CLI if not available: https://devcenter.heroku.com/articles/heroku-cli
heroku create PROJECT_NAME
```

**If name is taken:**
```bash
heroku create PROJECT_NAME-app
# or
heroku create PROJECT_NAME-SUFFIX
```

### 7.2 Configure Environment Variables
```bash
npm run setup:heroku-env
```

**Manual environment setup if script fails:**
```bash
heroku config:set NODE_ENV=production
heroku config:set PORT=3607
heroku config:set SESSION_SECRET=CHANGE_THIS_IN_PRODUCTION
heroku config:set FRONTEND_URL=https://YOUR_APP_NAME.herokuapp.com
# Add other variables from .env as needed
```

### 7.3 Set Up Automatic Deployment
```bash
npm run setup:auto-deploy
```

**Manual deployment setup:**
1. Visit: https://dashboard.heroku.com/apps/YOUR_APP_NAME/deploy/github
2. Click "Connect to GitHub"
3. Search for and select your repository
4. Click "Connect"
5. Enable "Automatic deploys" from main branch
6. Optionally enable "Wait for CI to pass before deploy"
7. Click "Deploy Branch" for initial deployment

### 7.4 Verification Commands
```bash
heroku apps:info                 # Should show app details
heroku config                    # Should show environment variables
heroku logs --tail               # Should show deployment logs
```

**‚úÖ SUCCESS CRITERIA:**
- Heroku app created and accessible
- Environment variables configured
- Automatic deployment enabled
- App responds at https://YOUR_APP_NAME.herokuapp.com

---

## üîÑ Step 8: Complete Setup Verification (MANDATORY)

### 8.1 Run Complete Setup Script
```bash
npm run setup:complete
```

### 8.2 Final Verification Checklist
- [ ] GitHub repository created and accessible
- [ ] All files committed and pushed to main branch
- [ ] Heroku app created and configured
- [ ] Environment variables set correctly
- [ ] Automatic deployment enabled
- [ ] App deploys successfully
- [ ] App accessible at Heroku URL
- [ ] Both frontend and backend respond correctly

### 8.3 Test Deployment Pipeline
```bash
# Make a small change and push to test auto-deployment
echo "# Test deployment" >> README.md
git add README.md
git commit -m "Test: verify auto-deployment"
git push
```

**Monitor deployment:**
```bash
heroku logs --tail
```

**‚úÖ SUCCESS CRITERIA:**
- Push to GitHub triggers automatic Heroku deployment
- Deployment completes successfully
- App remains accessible after deployment

---

## Summary of Critical Improvements

1. **Explicit file location requirements** with verification commands
2. **Tested package versions** with installation validation
3. **Mandatory validation steps** after each major section
4. **Common pitfall warnings** with specific solutions
5. **Step-by-step verification commands** with expected outputs
6. **Clear success/failure criteria** for each step
7. **Comprehensive troubleshooting guide** for known issues

This improved guide addresses all the issues encountered during setup and provides clear validation steps to catch problems early. 